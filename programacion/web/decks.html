<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Home - Chamous</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/game.css'>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script type='module'>
        localStorage.setItem('inventory', 'decks')
        inventoryLink.href = `/${localStorage.getItem('inventory')}`
        const username = localStorage.getItem('username')

        if (!username) {
            window.location.href = '/login'
        }

        window.onload = () => {
            const allMazos = document.getElementsByClassName('allMazos')[0]
            // allMazos.innerHTML = ''
            const id = localStorage.getItem('id')
            fetch(`/getDecks?id=${id}`, {
                method: 'GET'
            })
            .then(response => response.json())
            .then(data => {
                const decks = data.decks
                const cartas = data.arrayCartasDeck
                decks.forEach(deck => {
                    const deckName = document.getElementById('deckName')
                    deckName.textContent = deck.nombre + ' ' + data.mazoActual
                    const mazo = document.createElement('div')
                    mazo.classList.add('mazo')
                    const cartasMazo = cartas.filter(carta => carta.mazoCarta === deck.id)
                    for (let i = 0; i < 8; i++) {
                        const carta = document.createElement('div')
                        carta.classList.add('carta')
                        carta.setAttribute('onclick', `getCartas(${deck.id}, ${cartasMazo[i] ? cartasMazo[i].cartas[0].id : 0})`)
                        if (cartasMazo[i]) {
                            const img = document.createElement('img')
                            img.src = cartasMazo[i].cartas[0].foto
                            img.alt = cartasMazo[i].cartas[0].nombre
                            carta.appendChild(img)
                        }
                        mazo.appendChild(carta)
                    }
                    allMazos.appendChild(mazo)
                })
                const mazos = document.getElementsByClassName('mazo')
                for (let i = 0; i < mazos.length; i++) {
                    if (i + 1 !== data.mazoActual) {
                        mazos[i].style.display = 'none'
                    } else {
                        const mazoActualText = document.getElementsByClassName('mazoActual')[0]
                        mazoActualText.innerHTML = data.mazoActual
                    }
                }
            })
        }
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="img/logoC.png" alt="">
            <h1>CHAMOUS</h1>
        </div>
        <nav>
            <ul>
                <a href="/">HOME</a>
                <a href="/cards" id="inventoryLink">INVENTORY</a>
                <a href="/shop">SHOP</a>
                <a href="/information">INFORMATION</a>
            </ul>
        </nav>
        <div class="config">
            <i class='bx bx-cog'></i>
            <a href="/settings">SETTINGS</a>
        </div>
    </header>
    <div id="mazos">
        <div class="container">
            <div class="links">
                <div id="especial-link" onclick="window.location.href='/cards'" title="Cards"><button><svg height="50px" width="50px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" version="1.1" fill="none" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <rect height="11.5" width="8.25" y="2.75" x="1.75"></rect> <path d="m10 3.75 4.25 2-4.25 7.5"></path> </g></svg></button></div>
                <div onclick="window.location.reload()" title="Decks"><button><svg height="50px" width="50px" fill="#ffffff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 303.92 303.92" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M4.922,105.704l143.857,61.572c1.015,0.443,2.099,0.654,3.185,0.654s2.165-0.222,3.185-0.654l143.854-61.572 c3.037-1.303,4.983-4.311,4.914-7.615c-0.068-3.306-2.136-6.233-5.221-7.403L154.838,35.973c-1.859-0.709-3.905-0.709-5.759,0 L5.226,90.685c-3.085,1.17-5.152,4.103-5.224,7.403C-0.066,101.387,1.882,104.406,4.922,105.704z M151.959,52.209l122.233,46.488 l-122.233,52.32L29.724,98.698L151.959,52.209z"></path> <path d="M4.922,140.743l147.037,62.936l147.034-62.936c4.118-1.761,6.022-6.523,4.261-10.634 c-1.756-4.103-6.502-6.03-10.631-4.261L151.959,186.06L11.29,125.848c-4.116-1.764-8.873,0.153-10.634,4.261 C-1.105,134.225,0.807,138.982,4.922,140.743z"></path> <path d="M4.922,173.14l147.037,62.938l147.034-62.938c4.118-1.761,6.022-6.518,4.261-10.631 c-1.756-4.103-6.502-6.033-10.631-4.261L151.959,218.46L11.29,158.249c-4.116-1.762-8.873,0.152-10.634,4.261 C-1.105,166.623,0.807,171.379,4.922,173.14z"></path> <path d="M4.922,205.541l147.037,62.938l147.034-62.938c4.118-1.762,6.022-6.519,4.261-10.632 c-1.756-4.103-6.502-6.021-10.631-4.261L151.959,250.86L11.29,190.648c-4.116-1.761-8.873,0.153-10.634,4.261 C-1.105,199.022,0.807,203.779,4.922,205.541z"></path> </g> </g> </g></svg></button></div>
                <div onclick="window.location.href='/packs'" title="Packs"><button><svg fill="#ffffff" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M391.944,91.226l0.001-0.001c0,0-0.025-0.084-0.032-0.107L366.292,5.713C365.275,2.322,362.154,0,358.614,0H187.591 c-3.54,0-6.661,2.322-7.679,5.713l-25.621,85.405c-0.008,0.022-0.032,0.107-0.032,0.107h0.001 c-0.218,0.73-0.339,1.502-0.339,2.303v26.188h-26.188c-4.427,0-8.017,3.589-8.017,8.017v376.251c0,4.427,3.589,8.017,8.017,8.017 h222.33c4.427,0,8.017-3.589,8.017-8.017v-26.188h26.188c4.427,0,8.017-3.589,8.017-8.017V93.528 C392.284,92.728,392.163,91.956,391.944,91.226z M193.555,16.033h159.094l20.843,69.478H172.712L193.555,16.033z M342.046,469.748 c0,0.011-0.001,0.02-0.001,0.031c0,0.011,0.001,0.02,0.001,0.031v26.157H135.749V135.749h206.297V469.748z M376.251,461.762 h-18.171V127.733c0-4.427-3.589-8.017-8.017-8.017H169.954v-18.171h206.296V461.762z"></path> </g> </g> <g> <g> <path d="M238.898,239.432c-42.141,0-76.426,34.285-76.426,76.426s34.285,76.426,76.426,76.426s76.426-34.285,76.426-76.426 S281.039,239.432,238.898,239.432z M238.898,376.251c-33.3,0-60.392-27.092-60.392-60.393s27.092-60.392,60.392-60.392 s60.393,27.092,60.393,60.392S272.198,376.251,238.898,376.251z"></path> </g> </g> <g> <g> <path d="M238.898,273.637c-23.281,0-42.221,18.941-42.221,42.221s18.941,42.221,42.221,42.221s42.221-18.941,42.221-42.221 S262.178,273.637,238.898,273.637z M238.898,342.046c-14.44,0-26.188-11.748-26.188-26.188s11.748-26.188,26.188-26.188 s26.188,11.748,26.188,26.188S253.337,342.046,238.898,342.046z"></path> </g> </g> <g> <g> <path d="M305.26,394.382c-2.594-3.59-7.606-4.395-11.193-1.803c-16.184,11.695-35.261,17.876-55.169,17.876 c-19.92,0-39.006-6.188-55.194-17.895c-3.588-2.594-8.599-1.788-11.195,1.799c-2.594,3.588-1.789,8.599,1.799,11.195 c18.94,13.696,41.275,20.935,64.59,20.935c23.301,0,45.626-7.232,64.559-20.913C307.045,402.982,307.852,397.971,305.26,394.382z"></path> </g> </g> <g> <g> <path d="M303.488,226.164c-18.941-13.697-41.276-20.936-64.59-20.936c-23.299,0-45.621,7.231-64.556,20.911 c-3.588,2.593-4.395,7.604-1.803,11.193c2.593,3.587,7.605,4.395,11.193,1.802c16.184-11.693,35.26-17.873,55.166-17.873 c19.919,0,39.005,6.188,55.196,17.895c1.421,1.026,3.062,1.521,4.69,1.521c2.485,0,4.936-1.152,6.503-3.32 C307.881,233.77,307.076,228.758,303.488,226.164z"></path> </g> </g> </g></svg></button></div>
            </div>
            <div class="top">
                <h1>DECKS</h1>
            </div>
            <h3 id="deckName"></h3>
            <div class="allMazos">
            </div>
            <div class="pasar">
                <button onclick="mazoAtras()"> < </button>
                <p class="mazoActual"></p>
                <button onclick="siguienteMazo()"> > </button>
            </div>
            <div id="cartas-no-mazo">
                <button onclick="cerrarCartasNoMazo()"> X </button>
                <div class="cartas"></div>
            </div>
        </div>
    </div>
    <script src="js/game.js"></script>
</body>
</html>