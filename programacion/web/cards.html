<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Home - Chamous</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/game.css'>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script type='module'>
        localStorage.setItem('inventory', 'cards')
        const username = localStorage.getItem('username')

        if (!username) {
            window.location.href = '/login'
        }

        window.onload = () => {
            const yourCards = document.getElementsByClassName('yourCards')[0]
            yourCards.innerHTML = ''
            const id = localStorage.getItem('id')
            fetch(`http://13.53.190.234/getCards?id=${id}`, {
                method: 'GET'
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data)
                    const length = data.filteredCards.length
                    for (let i = 0; i < length; i++) {
                        const card = data.filteredCards[i]

                        const cardDiv = document.createElement('div')
                        cardDiv.className = 'carta'
                        cardDiv.style.backgroundImage = `url(${card.foto})`

                        const nombreCarta = document.createElement('p')
                        nombreCarta.className = 'nombreCarta'
                        nombreCarta.innerHTML = card.nombre

                        const ataqueVida = document.createElement('p')
                        ataqueVida.className = 'ataque-vida'
                        ataqueVida.innerHTML = card.ataque + '/' + card.vida

                        const ataqueEspecial = document.createElement('p')
                        ataqueEspecial.className = 'ataque-especial'
                        const textoAtaqueEspecial = data.ataques[i][0].nombre + ' - ' + data.ataques[i][0].descripcion
                        ataqueEspecial.innerHTML = textoAtaqueEspecial

                        cardDiv.appendChild(nombreCarta)
                        cardDiv.appendChild(ataqueEspecial)
                        cardDiv.appendChild(ataqueVida)
                        yourCards.appendChild(cardDiv)
                    }
                })
        }

        const quality = document.getElementById('quality')

        quality.addEventListener('change', () => {
            const yourCards = document.getElementsByClassName('yourCards')[0]
            yourCards.innerHTML = ''
            let ordenType = quality.value
            let orden = 'DESC'
            if (ordenType !== 'rareza' && ordenType !== 'tipo') {
                ordenType = 'costo_mana'
            }

            if (quality.value === 'manaDown') {
                orden = 'ASC'
            }
            const id = localStorage.getItem('id')
            fetch(`http://13.53.190.234/getCards?id=${id}&ordenType=${ordenType}&orden=${orden}`, {
                method: 'GET'
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data)
                    const length = data.filteredCards.length
                    for (let i = 0; i < length; i++) {
                        const card = data.filteredCards[i]

                        const cardDiv = document.createElement('div')
                        cardDiv.className = 'carta'
                        cardDiv.style.backgroundImage = `url(${card.foto})`

                        const nombreCarta = document.createElement('p')
                        nombreCarta.className = 'nombreCarta'
                        nombreCarta.innerHTML = card.nombre

                        const ataqueVida = document.createElement('p')
                        ataqueVida.className = 'ataque-vida'
                        ataqueVida.innerHTML = card.ataque + '/' + card.vida

                        const ataqueEspecial = document.createElement('p')
                        ataqueEspecial.className = 'ataque-especial'
                        const textoAtaqueEspecial = data.ataques[i][0].nombre + ' - ' + data.ataques[i][0].descripcion
                        ataqueEspecial.innerHTML = textoAtaqueEspecial

                        cardDiv.appendChild(nombreCarta)
                        cardDiv.appendChild(ataqueEspecial)
                        cardDiv.appendChild(ataqueVida)
                        yourCards.appendChild(cardDiv)
                    }
                })
        })
    </script>
</head>

<body>
    <header>
        <div class="logo">
            <img src="img/logoC.png" alt="">
            <h1>CHAMOUS</h1>
        </div>
        <nav>
            <ul>
                <a href="/">HOME</a>
                <a href="/cards">INVENTORY</a>
                <a href="/shop">SHOP</a>
                <a href="/information">INFORMATION</a>
            </ul>
        </nav>
        <div class="config">
            <i class='bx bx-cog'></i>
            <a href="/settings">SETTINGS</a>
        </div>
    </header>
    <div id="inventory">
        <div class="container">
            <div class="links">
                <div id="especial-link" onclick="window.location.reload()" title="Cards"><button><svg height="45px" width="45px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.0799 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.0799 19 6.2V17.8C19 18.9201 19 19.4802 18.782 19.908C18.5903 20.2843 18.2843 20.5903 17.908 20.782C17.4802 21 16.9201 21 15.8 21H8.2C7.07989 21 6.51984 21 6.09202 20.782C5.71569 20.5903 5.40973 20.2843 5.21799 19.908C5 19.4802 5 18.9201 5 17.8V6.2Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg></button></div>
                <div onclick="window.location.href='/decks'" title="Decks"><button><svg height="45px" width="45px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" fill="#ffffff" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <rect x="209.353" y="181.302" transform="matrix(0.2588 -0.9659 0.9659 0.2588 -105.3429 560.1899)" style="fill:#ffffff;" width="205.996" height="334.87"></rect> <circle style="fill:#ffffff;" cx="247.8" cy="305.71" r="22.551"></circle> <path style="fill:#ffffff;" d="M242.934,353.928l-13.457,6.649l-8.329-12.488c-16.896-0.32-32.73,8.614-41.226,23.166l87.13,23.347 C266.97,377.754,257.726,362.099,242.934,353.928z"></path> <path style="fill:#ffffff;" d="M392.077,315.186l-46.209-12.382c-6.017-1.615-12.198,1.957-13.81,7.973 c-1.612,6.015,1.957,12.198,7.973,13.81l46.21,12.382c6.014,1.612,12.198-1.957,13.81-7.973 C401.661,322.979,398.092,316.794,392.077,315.186z"></path> <rect x="101.389" y="145.182" style="fill:#ffffff;" width="334.88" height="206.002"></rect> <circle style="fill:#ffffff;" cx="195.358" cy="223.32" r="22.551"></circle> <path style="fill:#ffffff;" d="M204.757,269.955l-11.278,9.905l-11.277-9.907c-16.403,4.064-29.386,16.792-33.825,33.048h90.203 C234.142,286.748,221.161,274.019,204.757,269.955z"></path> <path style="fill:#ffffff;" d="M337.17,195.135h-47.839c-6.229-0.002-11.275,5.048-11.275,11.275 c0,6.227,5.048,11.275,11.275,11.275h47.84c6.226,0,11.275-5.048,11.275-11.275C348.446,200.183,343.398,195.132,337.17,195.135z"></path> <rect x="96.672" y="-4.192" transform="matrix(-0.2588 -0.9659 0.9659 -0.2588 93.6638 398.3586)" style="fill:#ffffff;" width="205.996" height="334.87"></rect> <circle style="fill:#ffffff;" cx="122.271" cy="158.261" r="22.551"></circle> <path style="fill:#ffffff;" d="M146.671,203.268l-8.329,12.488l-13.456-6.649c-14.793,8.171-24.038,23.826-24.119,40.676 l87.13-23.347C179.401,211.884,163.567,202.949,146.671,203.268z"></path> <path d="M258.398,385.026c-0.117,2.168-0.467,4.347-1.036,6.475c-1.611,6.015,1.96,12.198,7.975,13.809 c0.978,0.262,1.959,0.387,2.924,0.387c4.979,0,9.536-3.323,10.884-8.362c0.973-3.633,1.568-7.363,1.77-11.087 c0.337-6.218-4.43-11.533-10.647-11.87C264.051,374.057,258.736,378.807,258.398,385.026z"></path> <path d="M324.271,383.399c-6.017-1.614-12.198,1.957-13.81,7.973c-1.612,6.015,1.957,12.198,7.973,13.81l92.42,24.764 c0.978,0.262,1.96,0.387,2.926,0.387c4.978,0,9.534-3.323,10.884-8.36c1.612-6.015-1.957-12.198-7.973-13.81L324.271,383.399z"></path> <path d="M234.833,283.837c-6.093,1.283-9.993,7.262-8.711,13.357c0.448,2.128,0.675,4.322,0.675,6.522 c0,6.227,5.048,11.275,11.275,11.275s11.275-5.048,11.275-11.275c0-3.758-0.39-7.515-1.158-11.166 C246.907,286.454,240.927,282.555,234.833,283.837z"></path> <path d="M385.01,278.573h-95.68c-6.227,0-11.275,5.048-11.275,11.275s5.048,11.275,11.275,11.275h95.68 c6.227,0,11.275-5.048,11.275-11.275S391.237,278.573,385.01,278.573z"></path> <path d="M510.49,286.948c-1.495-2.59-3.958-4.48-6.846-5.253l-30.632-8.207c-6.015-1.612-12.199,1.957-13.81,7.973 c-1.612,6.015,1.957,12.198,7.973,13.81l19.741,5.289l-47.481,177.202l-301.688-80.837l0.936-3.492 c3.162-2.823,4.59-7.319,3.296-11.649c-1.785-5.966-8.066-9.352-14.035-7.57l-2.078,0.621c-3.748,1.122-6.647,4.105-7.659,7.885 l-5.161,19.261c-1.611,6.014,1.957,12.198,7.973,13.809l323.469,86.673c0.961,0.257,1.942,0.384,2.918,0.384 c1.963,0,3.909-0.513,5.638-1.511c2.59-1.495,4.48-3.958,5.253-6.846l53.318-198.985C512.39,292.615,511.985,289.538,510.49,286.948 z"></path> <path d="M447.543,351.189V145.184c0-6.227-5.048-11.275-11.275-11.275h-33.073c-6.227,0-11.275,5.048-11.275,11.275 c0,6.227,5.048,11.275,11.275,11.275h21.798v183.455H112.663v-8.665c0-6.227-5.048-11.275-11.275-11.275 s-11.275,5.048-11.275,11.275v19.941c0,6.227,5.048,11.275,11.275,11.275h334.88C442.495,362.465,447.543,357.417,447.543,351.189z"></path> <path d="M120.268,183.39c2.787,0,5.621-0.361,8.439-1.116c17.381-4.657,27.732-22.586,23.074-39.967 c-4.658-17.381-22.584-27.732-39.967-23.074c-17.381,4.657-27.732,22.586-23.074,39.967 C92.642,173.761,105.86,183.39,120.268,183.39z M117.651,141.014c0.87-0.233,1.745-0.345,2.607-0.345 c4.45,0,8.534,2.974,9.741,7.473c1.439,5.369-1.76,10.908-7.129,12.348c-5.369,1.44-10.909-1.76-12.348-7.129 S112.282,142.453,117.651,141.014z"></path> <path d="M131.625,193.164c-23.444,6.283-39.899,27.611-40.015,51.868c-0.029,6.227,4.995,11.299,11.221,11.33 c0.019,0,0.036,0,0.055,0c6.201,0,11.245-5.013,11.274-11.221c0.048-10.181,5.059-19.456,12.96-25.221l1.921,7.169 c1.35,5.038,5.905,8.361,10.884,8.361c0.965,0,1.948-0.125,2.925-0.387c6.015-1.611,9.585-7.795,7.973-13.809l-1.921-7.168 c9.725,1.042,18.703,6.569,23.835,15.361c3.139,5.378,10.043,7.191,15.423,4.054c5.378-3.139,7.193-10.044,4.054-15.423 C179.984,197.126,155.069,186.884,131.625,193.164z"></path> <path d="M211.612,128.6l46.21-12.382c6.014-1.611,9.584-7.795,7.973-13.81c-1.612-6.014-7.795-9.587-13.81-7.973l-46.21,12.382 c-6.014,1.611-9.584,7.795-7.973,13.81c1.35,5.038,5.905,8.36,10.884,8.36C209.652,128.987,210.634,128.863,211.612,128.6z"></path> <path d="M222.122,167.826l92.42-24.764c6.014-1.611,9.584-7.795,7.973-13.81c-1.611-6.014-7.794-9.586-13.81-7.973l-92.42,24.764 c-6.014,1.611-9.584,7.795-7.973,13.81c1.35,5.038,5.905,8.36,10.884,8.36C220.162,168.214,221.145,168.089,222.122,167.826z"></path> <path d="M319.76,162.539l-92.42,24.764c-6.014,1.611-9.584,7.795-7.973,13.81c1.35,5.038,5.905,8.36,10.884,8.36 c0.965,0,1.948-0.125,2.926-0.387l92.42-24.764c6.014-1.611,9.584-7.795,7.973-13.81 C331.959,164.496,325.776,160.924,319.76,162.539z"></path> <path d="M398.956,216.495L345.639,17.51c-0.775-2.889-2.663-5.351-5.253-6.846c-2.589-1.495-5.666-1.9-8.556-1.126L8.36,96.211 c-6.014,1.611-9.584,7.795-7.973,13.81l53.318,198.984c0.775,2.889,2.663,5.351,5.253,6.846c1.73,0.998,3.676,1.511,5.638,1.511 c0.976,0,1.957-0.127,2.918-0.385l323.469-86.673C396.999,228.694,400.568,222.511,398.956,216.495z M72.569,292.277L25.088,115.075 l301.686-80.837l47.481,177.203L72.569,292.277z"></path> </g></svg></button></div>
                <div onclick="window.location.href='/packs'" title="Packs"><button><i class='bx bxs-box'></i></button></div>
            </div>
            <div class="top">
                <h1>INVENTORY</h1>
            </div>
            <div class="allcards">
                <div class="filtrer">
                    <span>Order By</span>
                    <form action="" class="form">
                        <select name="quality" id="quality">
                            <option value="tipo">Type</option>
                            <option value="rareza">Quality</option>
                            <option value="manaUp">Mayor Maná</option>
                            <option value="manaDown">Menor Maná</option>
                        </select>
                    </form>
                </div>
                <div class="yourCards">
                </div>
            </div>
        </div>
    </div>
    <audio id="audio" src="img/Música para la Tierra Media (sin copyright).mp3" autoplay loop></audio>
    <script src="js/game.js"></script>
</body>
</html>